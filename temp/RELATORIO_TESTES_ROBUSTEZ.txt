â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TESTES DE ROBUSTEZ - Sistema de InserÃ§Ã£o de ExercÃ­cios
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Data: 2025-11-21
Objetivo: Validar parsing e detecÃ§Ã£o de erros em ficheiros .tex
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š RESUMO DOS TESTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TESTE 1: âœ… ExercÃ­cio Correto (MAT_P2ESTATI_REVI_D_999.tex)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ficheiro: ExerciseDatabase/matematica/P2_estatistica/0-revisoes/
          desenvolvimento/MAT_P2ESTATI_REVI_D_999.tex

Estrutura:
- Metadados completos âœ“
- \exercicio{} com tabela bem formada âœ“
- 3 \subexercicio{} fora do \exercicio{} âœ“
- Chavetas balanceadas âœ“

Resultado: âœ… VALIDAÃ‡ÃƒO BEM-SUCEDIDA
Erros: 0
Avisos: 0


TESTE 2: âŒ Erro de Sintaxe - Chavetas NÃ£o Fechadas
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ficheiro: temp/test_errors/ERROR_UNCLOSED_BRACE.tex

Erro Simulado:
\begin{tabular}{|l|c|}
...
\end{tabular     â† FALTA "}"!

Resultado: âŒ VALIDAÃ‡ÃƒO FALHOU (como esperado)
Erros Detectados:
  â€¢ Ambiente '\begin{tabular}' nÃ£o fechado com '\end{tabular}'
  â€¢ Ambientes tabular desbalanceados: 1 \begin vs 0 \end

âœ… Sistema detectou o erro corretamente!


TESTE 3: âŒ Estrutura Incorreta - AlÃ­neas Dentro do \exercicio{}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ficheiro: temp/test_errors/ERROR_SUB_INSIDE.tex

Erro Simulado:
\exercicio{
Enunciado...
\subexercicio{Isto nÃ£o deveria estar aqui!}  â† ERRO!
}

Resultado: âŒ VALIDAÃ‡ÃƒO FALHOU (como esperado)
Erros Detectados:
  â€¢ Chavetas nÃ£o balanceadas no enunciado
Avisos:
  â€¢ \subexercicio{} encontrado DENTRO de \exercicio{} - deveria estar FORA!

âœ… Sistema detectou o problema estrutural!


TESTE 4: âŒ Campos ObrigatÃ³rios em Falta
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ficheiro: temp/test_errors/ERROR_MISSING_FIELDS.tex

Erro Simulado:
% Exercise ID: 
% Module: | Concept: 
% Type: | Difficulty: 
(Todos os campos vazios)

Resultado: âŒ VALIDAÃ‡ÃƒO FALHOU (como esperado)
Erros Detectados:
  â€¢ Campo 'Exercise ID' estÃ¡ vazio
  â€¢ Campo obrigatÃ³rio 'Module' em falta ou vazio
  â€¢ Campo obrigatÃ³rio 'Concept' em falta ou vazio
  â€¢ Campo obrigatÃ³rio 'Type' em falta
  â€¢ Campo obrigatÃ³rio 'Difficulty' em falta

âœ… Sistema detectou todos os campos em falta!


TESTE 5: âš ï¸ Lixo de Template NÃ£o Removido
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ficheiro: temp/test_errors/ERROR_TEMPLATE_GARBAGE.tex

Problema Simulado:
\exercicio{
    % â† ESCREVA APENAS O ENUNCIADO AQUI
    % Exemplo: Determine a funÃ§Ã£o inversa...
}
Primeira alÃ­nea   â† LIXO!
Segunda alÃ­nea    â† LIXO!

Resultado: âœ… VALIDAÃ‡ÃƒO BEM-SUCEDIDA (sem erros crÃ­ticos)
Avisos:
  â€¢ PossÃ­vel lixo do template encontrado: 'Primeira alÃ­nea'
  â€¢ PossÃ­vel lixo do template encontrado: 'Segunda alÃ­nea'
  â€¢ PossÃ­vel lixo do template encontrado: 'â† ESCREVA APENAS'
  â€¢ PossÃ­vel lixo do template encontrado: '% Exemplo:'

âœ… Sistema alertou sobre lixo de template!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ COBERTURA DE TESTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Estrutura LaTeX:
   [x] \exercicio{} bem formado
   [x] Chavetas balanceadas/desbalanceadas
   [x] Ambientes LaTeX (tabular, enumerate, itemize)
   [x] Ambientes nÃ£o fechados
   [x] SÃ­mbolos matemÃ¡ticos ($...$)

âœ… Metadados:
   [x] Campos obrigatÃ³rios presentes
   [x] Campos obrigatÃ³rios vazios
   [x] Formato combinado (Module | Concept)
   [x] Formato separado

âœ… Estrutura SemÃ¢ntica:
   [x] \subexercicio{} fora do \exercicio{}
   [x] \subexercicio{} dentro do \exercicio{} (erro)
   [x] Contagem de alÃ­neas

âœ… Limpeza de Template:
   [x] DetecÃ§Ã£o de texto de exemplo
   [x] DetecÃ§Ã£o de instruÃ§Ãµes nÃ£o removidas
   [x] DetecÃ§Ã£o de placeholders

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ CONCLUSÃ•ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… O validador detecta corretamente:
   - Erros de sintaxe LaTeX (chavetas, ambientes)
   - Campos obrigatÃ³rios em falta
   - Estrutura incorreta (\subexercicio dentro de \exercicio)
   - Lixo de template nÃ£o removido

2. âœ… O parsing funciona com:
   - Formato combinado de metadados (Module | Concept)
   - Estruturas LaTeX complexas (tabelas, ambientes aninhados)
   - MÃºltiplas alÃ­neas (\subexercicio)

3. âš ï¸ Avisos vs Erros:
   - ERROS: Bloqueiam a validaÃ§Ã£o (sintaxe, campos obrigatÃ³rios)
   - AVISOS: NÃ£o bloqueiam mas alertam (lixo de template)

4. ğŸš€ Robustez do Sistema:
   - 5/5 testes funcionaram como esperado
   - DetecÃ§Ã£o de erros precisa e informativa
   - Mensagens de erro claras para o utilizador

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ FICHEIROS CRIADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ExerciseDatabase/_tools/validate_exercise_structure.py
   - Validador completo de estrutura de exercÃ­cios
   - Uso: python validate_exercise_structure.py <ficheiro.tex>

2. ExerciseDatabase/matematica/P2_estatistica/0-revisoes/
   desenvolvimento/MAT_P2ESTATI_REVI_D_999.tex
   - ExercÃ­cio teste correto (PASSOU)

3. temp/test_errors/ERROR_UNCLOSED_BRACE.tex
   - Teste de chavetas nÃ£o fechadas (FALHOU como esperado)

4. temp/test_errors/ERROR_SUB_INSIDE.tex
   - Teste de alÃ­neas dentro do \exercicio{} (FALHOU como esperado)

5. temp/test_errors/ERROR_MISSING_FIELDS.tex
   - Teste de campos em falta (FALHOU como esperado)

6. temp/test_errors/ERROR_TEMPLATE_GARBAGE.tex
   - Teste de lixo de template (AVISOS gerados)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ COMO USAR O VALIDADOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Validar um ficheiro especÃ­fico:
python ExerciseDatabase/_tools/validate_exercise_structure.py <ficheiro.tex>

# Validar o ficheiro teste padrÃ£o:
python ExerciseDatabase/_tools/validate_exercise_structure.py

# Integrar em CI/CD:
# Exit code: 0 = sucesso, 1 = falha

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… SISTEMA DE INSERÃ‡ÃƒO DE EXERCÃCIOS - ROBUSTO E TESTADO!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
